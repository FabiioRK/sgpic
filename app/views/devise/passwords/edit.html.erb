<% if resource.errors.any? %>
  <div class="alert alert-danger" id="error_explanation" data-turbo-cache="false">
    <h3 class="alert-heading"><i class="bi bi-exclamation-circle me-2"></i>Não foi possível atualizar a senha</h3>
    <ul class="mb-0">
      <% resource.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="login-page d-flex align-items-center justify-content-center mt-5">
  <div class="login-card shadow-lg p-5 rounded">
    <div class="login-header text-center mb-4">
      <h1 class="login-title">Redefinir senha</h1>
      <p class="text-muted">Escolha uma nova senha para sua conta.</p>
    </div>

    <%= form_for(resource, as: resource_name, url: password_path(resource_name), html: { method: :put, class: "form" }) do |f| %>
      <%= f.hidden_field :reset_password_token %>

      <div class="form-group mb-4">
        <div class="input-wrapper">
          <%= f.password_field :password, placeholder: "Nova senha", autofocus: true, autocomplete: "new-password", class: "form-control form-control-modern password-input" %>
          <button type="button" class="input-field-icon password-toggle" data-target-class="password-input">
            <i class="bi bi-eye input-icon"></i>
          </button>
        </div>
          <% if @minimum_password_length %>
            <small class="text-muted d-block mt-1">(<%= @minimum_password_length %> caracteres mínimo)</small>
          <% end %>
      </div>

      <div class="input-wrapper">
        <div class="form-group mb-4">
          <%= f.password_field :password_confirmation, placeholder: "Confirme a nova Senha", autocomplete: "new-password", class: "form-control form-control-modern password-confirmation-input" %>
          <button type="button" class="input-field-icon password-toggle" data-target-class="password-confirmation-input">
            <i class="bi bi-eye input-icon"></i>
          </button>
        </div>
      </div>

      <div class="d-grid mb-4">
        <%= f.submit "Alterar Senha", class: "btn-modern" do %>
          <i class="bi bi-key"></i> Alterar Senha
        <% end %>
      </div>
    <% end %>

    <div class="text-center mt-3">
      <%= link_to "Voltar para login", new_session_path(resource_name), class: "text-decoration-none text-muted small" %>
    </div>
  </div>
</div>